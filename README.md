# A collection of scripts to automate system management tasks
## update-kernel.sh
* Description: Update Linux kernel to the latest version
* System Required: CentOS 6+, Debian10+, Ubuntu16+
* Usage
  * online
  ```base
  bash <(wget -qO- https://raw.githubusercontent.com/zxcvos/system-automation-scripts/main/update-kernel.sh)
  ```
  * download
  ```base
  wget -O update-kernel.sh https://raw.githubusercontent.com/zxcvos/system-automation-scripts/main/update-kernel.sh
  bash update-kernel.sh
  ```
  * base64
  ```base
  echo "IyEvdXNyL2Jpbi9lbnYgYmFzaAojCiMgRGVzY3JpcHRpb246ICAgICAgVXBkYXRlIExpbnV4IGtlcm5lbCB0byB0aGUgbGF0ZXN0IHZlcnNpb24KIyBTeXN0ZW0gUmVxdWlyZWQ6ICBDZW50T1MgNissIERlYmlhbjEwKywgVWJ1bnR1MTYrCiMKIyBDb3B5cmlnaHQgKEMpIDIwMjMgenhjdm9zCiMgVGhhbmtzOiBUZWRkeXN1biA8aUB0ZWRkeXN1bi5jb20+CiMgT3JpZ2luYWw6IGh0dHBzOi8vdGVkZHlzdW4uY29tLzQ4OS5odG1sCiMgR2l0aHViOiBodHRwczovL2dpdGh1Yi5jb20venhjdm9zL3N5c3RlbS1hdXRvbWF0aW9uLXNjcmlwdHMvYmxvYi9tYWluL3VwZGF0ZS1rZXJuZWwuc2gKCnRyYXAgJ3JtIC1yZiAiJHtUTVBGSUxFfSInIEVYSVQKVE1QRklMRT0kKG1rdGVtcCAtZCAtcCAke0hPTUV9IC10IHVwZGF0ZV9rZXJuZWwuWFhYWFhYWCkgfHwgZXhpdCAxCgpjdXJfZGlyPSIkKGNkIC1QIC0tICIkKGRpcm5hbWUgLS0gIiQwIikiICYmIHB3ZCAtUCkiClJFRD0nXDAzM1sxOzMxOzMxbScKR1JFRU49J1wwMzNbMTszMTszMm0nCllFTExPVz0nXDAzM1sxOzMxOzMzbScKTkM9J1wwMzNbMG0nCgpmdW5jdGlvbiBfaW5mbygpIHsKICAgIHByaW50ZiAiJHtHUkVFTn1bSW5mb10gJHtOQ30iCiAgICBwcmludGYgLS0gIiVzIiAiJDEiCiAgICBwcmludGYgIlxuIgp9CgpmdW5jdGlvbiBfd2FybigpIHsKICAgIHByaW50ZiAiJHtZRUxMT1d9W1dhcm5pbmddICR7TkN9IgogICAgcHJpbnRmIC0tICIlcyIgIiQxIgogICAgcHJpbnRmICJcbiIKfQoKZnVuY3Rpb24gX2Vycm9yKCkgewogICAgcHJpbnRmICIke1JFRH1bRXJyb3JdICR7TkN9IgogICAgcHJpbnRmIC0tICIlcyIgIiQxIgogICAgcHJpbnRmICJcbiIKICAgIGV4aXQgMQp9CgpmdW5jdGlvbiBfZXhpc3RzKCkgewogICAgbG9jYWwgY21kPSIkMSIKICAgIGlmIGV2YWwgdHlwZSB0eXBlID4gL2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICAgICBldmFsIHR5cGUgIiRjbWQiID4gL2Rldi9udWxsIDI+JjEKICAgIGVsaWYgY29tbWFuZCA+IC9kZXYvbnVsbCAyPiYxOyB0aGVuCiAgICAgICAgY29tbWFuZCAtdiAiJGNtZCIgPiAvZGV2L251bGwgMj4mMQogICAgZWxzZQogICAgICAgIHdoaWNoICIkY21kIiA+IC9kZXYvbnVsbCAyPiYxCiAgICBmaQogICAgbG9jYWwgcnQ9JD8KICAgIHJldHVybiAke3J0fQp9CgpmdW5jdGlvbiBfb3MoKSB7CiAgICBsb2NhbCBvcz0iIgogICAgWyAtZiAiL2V0Yy9kZWJpYW5fdmVyc2lvbiIgXSAmJiBzb3VyY2UgL2V0Yy9vcy1yZWxlYXNlICYmIG9zPSIke0lEfSIgJiYgcHJpbnRmIC0tICIlcyIgIiR7b3N9IiAmJiByZXR1cm4KICAgIFsgLWYgIi9ldGMvcmVkaGF0LXJlbGVhc2UiIF0gJiYgb3M9ImNlbnRvcyIgJiYgcHJpbnRmIC0tICIlcyIgIiR7b3N9IiAmJiByZXR1cm4KfQoKZnVuY3Rpb24gX29zX2Z1bGwoKSB7CiAgICBbIC1mIC9ldGMvcmVkaGF0LXJlbGVhc2UgXSAmJiBhd2sgJ3twcmludCAoJDEsJDN+L15bMC05XS8/JDM6JDQpfScgL2V0Yy9yZWRoYXQtcmVsZWFzZSAmJiByZXR1cm4KICAgIFsgLWYgL2V0Yy9vcy1yZWxlYXNlIF0gJiYgYXdrIC1GJ1s9ICJdJyAnL1BSRVRUWV9OQU1FL3twcmludCAkMywkNCwkNX0nIC9ldGMvb3MtcmVsZWFzZSAmJiByZXR1cm4KICAgIFsgLWYgL2V0Yy9sc2ItcmVsZWFzZSBdICYmIGF3ayAtRidbPSJdKycgJy9ERVNDUklQVElPTi97cHJpbnQgJDJ9JyAvZXRjL2xzYi1yZWxlYXNlICYmIHJldHVybgp9CgpmdW5jdGlvbiBfb3NfdmVyKCkgewogICAgbG9jYWwgbWFpbl92ZXI9IiQoIGVjaG8gJChfb3NfZnVsbCkgfCBncmVwIC1vRSAgIlswLTkuXSsiKSIKICAgIHByaW50ZiAtLSAiJXMiICIke21haW5fdmVyJSUuKn0iCn0KCmZ1bmN0aW9uIF9lcnJvcl9kZXRlY3QoKSB7CiAgICBsb2NhbCBjbWQ9IiQxIgogICAgX2luZm8gIiR7Y21kfSIKICAgIGV2YWwgJHtjbWR9CiAgICBpZiBbICQ/IC1uZSAwIF07IHRoZW4KICAgICAgICBfZXJyb3IgIkV4ZWN1dGlvbiBjb21tYW5kICgke2NtZH0pIGZhaWxlZCwgcGxlYXNlIGNoZWNrIGl0IGFuZCB0cnkgYWdhaW4uIgogICAgZmkKfQoKZnVuY3Rpb24gX2lzXzY0Yml0KCkgewogICAgaWYgWyAkKGdldGNvbmYgV09SRF9CSVQpID0gJzMyJyBdICYmIFsgJChnZXRjb25mIExPTkdfQklUKSA9ICc2NCcgXTsgdGhlbgogICAgICAgIHJldHVybiAwCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIDEKICAgIGZpCn0KCmZ1bmN0aW9uIF92ZXJzaW9uX2dlKCkgewogICAgdGVzdCAiJChlY2hvICIkQCIgfCB0ciAiICIgIlxuIiB8IHNvcnQgLXJWIHwgaGVhZCAtbiAxKSIgPT0gIiQxIgp9CgpmdW5jdGlvbiBpbnN0YWxsX2RlcGVuZGVuY2UoKSB7CiAgICBjYXNlICIkKF9vcykiIGluCiAgICAgICAgY2VudG9zKQogICAgICAgICAgICBjYXNlICIkKF9vc192ZXIpIiBpbgogICAgICAgICAgICAgICAgNnw3KQogICAgICAgICAgICAgICAgICAgIGlmIFtbIDYgPT0gIiQoX29zX3ZlcikiIF1dOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG1haW5fdmVyPSIkKCBlY2hvICQoX29zX2Z1bGwpIHwgZ3JlcCAtb0UgICJbMC05Ll0rIikiCiAgICAgICAgICAgICAgICAgICAgICAgIGNwIC9ldGMveXVtLnJlcG9zLmQvQ2VudE9TLUJhc2UucmVwbyAvZXRjL3l1bS5yZXBvcy5kL0NlbnRPUy1CYXNlLnJlcG8uYmFrCiAgICAgICAgICAgICAgICAgICAgICAgIHNlZCAtaSAncy9ebWlycm9ybGlzdC8jJi9nOyBzL14jYmFzZXVybC9iYXNldXJsL2cnIC9ldGMveXVtLnJlcG9zLmQvQ2VudE9TLUJhc2UucmVwbwogICAgICAgICAgICAgICAgICAgICAgICBzZWQgLWkgInN8bWlycm9yLmNlbnRvcy5vcmcvY2VudG9zL1wkcmVsZWFzZXZlcnx2YXVsdC5jZW50b3Mub3JnLyRtYWluX3ZlcnxnIiAvZXRjL3l1bS5yZXBvcy5kL0NlbnRPUy1CYXNlLnJlcG8KICAgICAgICAgICAgICAgICAgICAgICAgeXVtIGNsZWFuIGFsbAogICAgICAgICAgICAgICAgICAgICAgICB5dW0gcmVwb2xpc3QKICAgICAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICAgICAgICAgIHl1bSB1cGRhdGUgLXkKICAgICAgICAgICAgICAgICAgICBpZiAhIF9leGlzdHMgImN1cmwiOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgInl1bSBpbnN0YWxsIC15IGN1cmwiCiAgICAgICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgICAgICBpZiAhIF9leGlzdHMgIndnZXQiOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgInl1bSBpbnN0YWxsIC15IHdnZXQiCiAgICAgICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgICAgICBpZiAhIF9leGlzdHMgInBlcmwiOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgInl1bSBpbnN0YWxsIC15IHBlcmwiCiAgICAgICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgICAgICA7OwogICAgICAgICAgICAgICAgOHw5KQogICAgICAgICAgICAgICAgICAgIGRuZiB1cGRhdGUgLXkKICAgICAgICAgICAgICAgICAgICBpZiAhIF9leGlzdHMgImN1cmwiOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgImRuZiBpbnN0YWxsIC15IGN1cmwiCiAgICAgICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgICAgICBpZiAhIF9leGlzdHMgIndnZXQiOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgImRuZiBpbnN0YWxsIC15IHdnZXQiCiAgICAgICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgICAgICA7OwogICAgICAgICAgICAgICAgKikKICAgICAgICAgICAgICAgICAgICA7OyAjIGRvIG5vdGhpbmcKICAgICAgICAgICAgZXNhYwogICAgICAgICAgICA7OwogICAgICAgIHVidW50dXxkZWJpYW4pCiAgICAgICAgICAgIGFwdC1nZXQgdXBkYXRlIC15CiAgICAgICAgICAgIGlmICEgX2V4aXN0cyAid2dldCI7IHRoZW4KICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgImFwdC1nZXQgaW5zdGFsbCAteSB3Z2V0IgogICAgICAgICAgICBmaQogICAgICAgICAgICBpZiAhIF9leGlzdHMgImN1cmwiOyB0aGVuCiAgICAgICAgICAgICAgICBfZXJyb3JfZGV0ZWN0ICJhcHQtZ2V0IGluc3RhbGwgLXkgY3VybCIKICAgICAgICAgICAgZmkKICAgICAgICAgICAgaWYgW1sgImRlYmlhbiIgPT0gIiQoX29zKSIgfHwgKCJ1YnVudHUiID09ICIkKF9vcykiICYmIDE2ID09ICIkKF9vc192ZXIpIikgXV07IHRoZW4KICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgImFwdC1nZXQgaW5zdGFsbCAteSBsaW51eC1iYXNlIgogICAgICAgICAgICAgICAgaWYgISBfZXhpc3RzICJhciI7IHRoZW4KICAgICAgICAgICAgICAgICAgICBfZXJyb3JfZGV0ZWN0ICJhcHQtZ2V0IGluc3RhbGwgLXkgYmludXRpbHMiCiAgICAgICAgICAgICAgICBmaQogICAgICAgICAgICAgICAgaWYgISBfZXhpc3RzICJ6c3RkIjsgdGhlbgogICAgICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgImFwdC1nZXQgaW5zdGFsbCAteSB6c3RkIgogICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgIGlmICEgX2V4aXN0cyAieHoiOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgX2Vycm9yX2RldGVjdCAiYXB0LWdldCBpbnN0YWxsIC15IHh6LXV0aWxzIgogICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgZmkKICAgICAgICAgICAgOzsKICAgIGVzYWMKfQoKZnVuY3Rpb24gZHBrZ19yZXBhY2tlZCgpIHsKICAgIERFQl9QQUNLQUdFPSIkezF9IgogICAgY3AgLWEgJHtERUJfUEFDS0FHRX0gJHtUTVBGSUxFfS8ke0RFQl9QQUNLQUdFfQogICAgX2Vycm9yX2RldGVjdCAiY2QgJHtUTVBGSUxFfSIKICAgIF9lcnJvcl9kZXRlY3QgImFyIHggJHtERUJfUEFDS0FHRX0iCiAgICBpZiBbWyAtcyBjb250cm9sLnRhci56c3QgJiYgLXMgZGF0YS50YXIuenN0IF1dOyB0aGVuCiAgICAgICAgX2Vycm9yX2RldGVjdCAicm0gLXJmICR7REVCX1BBQ0tBR0V9IgogICAgICAgIF9lcnJvcl9kZXRlY3QgInpzdGQgLWQgPCBjb250cm9sLnRhci56c3QgfCB4eiA+IGNvbnRyb2wudGFyLnh6IgogICAgICAgIF9lcnJvcl9kZXRlY3QgInpzdGQgLWQgPCBkYXRhLnRhci56c3QgfCB4eiA+IGRhdGEudGFyLnh6IgogICAgICAgIF9lcnJvcl9kZXRlY3QgImFyIC1tIC1jIC1hIHNkc2QgJHtERUJfUEFDS0FHRX0gZGViaWFuLWJpbmFyeSBjb250cm9sLnRhci54eiBkYXRhLnRhci54eiIKICAgICAgICBfZXJyb3JfZGV0ZWN0ICJybSAtcmYgZGViaWFuLWJpbmFyeSBjb250cm9sLnRhci54eiBkYXRhLnRhci54eiBjb250cm9sLnRhci56c3QgZGF0YS50YXIuenN0IgogICAgZmkKICAgIF9lcnJvcl9kZXRlY3QgImNkIC0iCiAgICBtdiAtZiAiJHtUTVBGSUxFfS8ke0RFQl9QQUNLQUdFfSIgJHtERUJfUEFDS0FHRX0KICAgIHJtIC1yZiAiJHtUTVBGSUxFfS8qIgp9CgpmdW5jdGlvbiBnZXRfcnBtX2xhdGVzdF92ZXJzaW9uKCkgewogICAgbG9jYWwgb3NfdmVyPSIkKF9vc192ZXIpIgogICAgX2Vycm9yX2RldGVjdCAicnBtIC0taW1wb3J0IGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9lbHJlcG8vcGFja2FnZXMvbWFzdGVyL2VscmVwby1yZWxlYXNlL2VsJHtvc192ZXJ9L1JQTS1HUEctS0VZLWVscmVwby5vcmciCiAgICBjYXNlICR7b3NfdmVyfSBpbgogICAgICAgIDYpCiAgICAgICAgICAgIHJwbV9rZXJuZWxfdXJsPSJodHRwczovL2RsLmxhbXAuc2gvZmlsZXMvIgogICAgICAgICAgICBycG1fa2VybmVsX3ZlcnNpb249IjQuMTguMjAiCiAgICAgICAgICAgIGlmIF9pc182NGJpdDsgdGhlbgogICAgICAgICAgICAgICAgcnBtX2tlcm5lbF9uYW1lPSJrZXJuZWwtbWwtNC4xOC4yMC0xLmVsNi5lbHJlcG8ueDg2XzY0LnJwbSIKICAgICAgICAgICAgICAgIHJwbV9rZXJuZWxfZGV2ZWxfbmFtZT0ia2VybmVsLW1sLWRldmVsLTQuMTguMjAtMS5lbDYuZWxyZXBvLng4Nl82NC5ycG0iCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHJwbV9rZXJuZWxfbmFtZT0ia2VybmVsLW1sLTQuMTguMjAtMS5lbDYuZWxyZXBvLmk2ODYucnBtIgogICAgICAgICAgICAgICAgcnBtX2tlcm5lbF9kZXZlbF9uYW1lPSJrZXJuZWwtbWwtZGV2ZWwtNC4xOC4yMC0xLmVsNi5lbHJlcG8uaTY4Ni5ycG0iCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIDs7CiAgICAgICAgN3w4fDkpCiAgICAgICAgICAgIHJwbV9rZXJuZWxfdXJsPSJodHRwczovL2RsLmxhbXAuc2gva2VybmVsL2VsJHtvc192ZXJ9LyIKICAgICAgICAgICAgaWYgX2lzXzY0Yml0OyB0aGVuCiAgICAgICAgICAgICAgICBycG1fbGlzdD0kKHdnZXQgLXFPLSAke3JwbV9rZXJuZWxfdXJsfSkKICAgICAgICAgICAgICAgIHJwbV9rZXJuZWxfdmVyc2lvbj0kKGVjaG8gJHtycG1fbGlzdH0gfCBncmVwIC1Fb2kgImtlcm5lbC1tbC1bNS05XStcLlswLTldK1wuWzAtOV0rLTFcLmVsJHtvc192ZXJ9XC4oZWxyZXBvXC4pP3g4Nl82NC5ycG0iIHwgY3V0IC1kLSAtZjMgfCBncmVwIC12IC0gfCBzb3J0IC1WIHwgdGFpbCAtbiAxKQogICAgICAgICAgICAgICAgcnBtX2tlcm5lbF9uYW1lPSQoZWNobyAke3JwbV9saXN0fSB8IGdyZXAgLUVvaSAia2VybmVsLW1sLVs1LTldK1wuWzAtOV0rXC5bMC05XSstMVwuZWwke29zX3Zlcn1cLihlbHJlcG9cLik/eDg2XzY0LnJwbSIgfCBzb3J0IC1WIHwgdW5pcSB8IHRhaWwgLW4gMSkKICAgICAgICAgICAgICAgIHJwbV9rZXJuZWxfZGV2ZWxfbmFtZT0kKGVjaG8gJHtycG1fbGlzdH0gfCBncmVwIC1Fb2kgImtlcm5lbC1tbC1kZXZlbC1bNS05XStcLlswLTldK1wuWzAtOV0rLTFcLmVsJHtvc192ZXJ9XC4oZWxyZXBvXC4pP3g4Nl82NC5ycG0iIHwgc29ydCAtViB8IHVuaXEgfCB0YWlsIC1uIDEpCiAgICAgICAgICAgICAgICBycG1fa2VybmVsX2hlYWRlcnNfbmFtZT0kKGVjaG8gJHtycG1fbGlzdH0gfCBncmVwIC1Fb2kgImtlcm5lbC1tbC1oZWFkZXJzLVs1LTldK1wuWzAtOV0rXC5bMC05XSstMVwuZWwke29zX3Zlcn1cLihlbHJlcG9cLik/eDg2XzY0LnJwbSIgfCBzb3J0IC1WIHwgdW5pcSB8IHRhaWwgLW4gMSkKICAgICAgICAgICAgICAgIGlmIFtbICR7b3NfdmVyfSAtZXEgOCB8fCAke29zX3Zlcn0gLWVxIDkgXV07IHRoZW4KICAgICAgICAgICAgICAgICAgICBycG1fa2VybmVsX2NvcmVfbmFtZT0kKGVjaG8gJHtycG1fbGlzdH0gfCBncmVwIC1Fb2kgImtlcm5lbC1tbC1jb3JlLVs1LTldK1wuWzAtOV0rXC5bMC05XSstMVwuZWwke29zX3Zlcn1cLihlbHJlcG9cLik/eDg2XzY0LnJwbSIgfCBzb3J0IC1WIHwgdW5pcSB8IHRhaWwgLW4gMSkKICAgICAgICAgICAgICAgICAgICBycG1fa2VybmVsX21vZHVsZXNfbmFtZT0kKGVjaG8gJHtycG1fbGlzdH0gfCBncmVwIC1Fb2kgImtlcm5lbC1tbC1tb2R1bGVzLVs1LTldK1wuWzAtOV0rXC5bMC05XSstMVwuZWwke29zX3Zlcn1cLihlbHJlcG9cLik/eDg2XzY0LnJwbSIgfCBzb3J0IC1WIHwgdW5pcSB8IHRhaWwgLW4gMSkKICAgICAgICAgICAgICAgIGZpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIF9lcnJvciAiTm90IHN1cHBvcnRlZCBhcmNoaXRlY3R1cmUsIHBsZWFzZSBjaGFuZ2UgdG8gNjQtYml0IGFyY2hpdGVjdHVyZS4iCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIDs7CiAgICAgICAgKikKICAgICAgICAgICAgOzsgIyBkbyBub3RoaW5nCiAgICBlc2FjCn0KCmZ1bmN0aW9uIGdldF9kZWJfbGF0ZXN0X3ZlcnNpb24oKSB7CiAgICBpZiBfaXNfNjRiaXQ7IHRoZW4KICAgICAgICBkZWJfa2VybmVsX3ZlcnNpb249JCh3Z2V0IC1xTy0gaHR0cHM6Ly9rZXJuZWwudWJ1bnR1LmNvbS9+a2VybmVsLXBwYS9tYWlubGluZS8gfCBhd2sgLUYnXCJ2JyAnL3ZbNC05XS4ve3ByaW50ICQyfScgfCBjdXQgLWQvIC1mMSB8IGdyZXAgLXYgLSB8IHNvcnQgLVYgfCB0YWlsIC1uIDEpCiAgICAgICAgW1sgLXogJHtkZWJfa2VybmVsX3ZlcnNpb259IF1dICYmIF9lcnJvciAiR2V0IGxhdGVzdCBrZXJuZWwgdmVyc2lvbiBmYWlsZWQuIgogICAgICAgIGRlYl9uYW1lPSQod2dldCAtcU8tIGh0dHBzOi8va2VybmVsLnVidW50dS5jb20vfmtlcm5lbC1wcGEvbWFpbmxpbmUvdiR7ZGViX2tlcm5lbF92ZXJzaW9ufS8gfCBncmVwICJsaW51eC1pbWFnZSIgfCBncmVwICJnZW5lcmljIiB8IGF3ayAtRidcIj4nICcvYW1kNjQuZGViL3twcmludCAkMn0nIHwgY3V0IC1kJzwnIC1mMSB8IGhlYWQgLTEpCiAgICAgICAgZGViX2tlcm5lbF91cmw9Imh0dHBzOi8va2VybmVsLnVidW50dS5jb20vfmtlcm5lbC1wcGEvbWFpbmxpbmUvdiR7ZGViX2tlcm5lbF92ZXJzaW9ufS8ke2RlYl9uYW1lfSIKICAgICAgICBkZWJfa2VybmVsX25hbWU9ImxpbnV4LWltYWdlLSR7ZGViX2tlcm5lbF92ZXJzaW9ufS1hbWQ2NC5kZWIiCiAgICAgICAgbW9kdWxlc19kZWJfbmFtZT0kKHdnZXQgLXFPLSBodHRwczovL2tlcm5lbC51YnVudHUuY29tL35rZXJuZWwtcHBhL21haW5saW5lL3Yke2RlYl9rZXJuZWxfdmVyc2lvbn0vIHwgZ3JlcCAibGludXgtbW9kdWxlcyIgfCBncmVwICJnZW5lcmljIiB8IGF3ayAtRidcIj4nICcvYW1kNjQuZGViL3twcmludCAkMn0nIHwgY3V0IC1kJzwnIC1mMSB8IGhlYWQgLTEpCiAgICAgICAgZGViX2tlcm5lbF9tb2R1bGVzX3VybD0iaHR0cHM6Ly9rZXJuZWwudWJ1bnR1LmNvbS9+a2VybmVsLXBwYS9tYWlubGluZS92JHtkZWJfa2VybmVsX3ZlcnNpb259LyR7bW9kdWxlc19kZWJfbmFtZX0iCiAgICAgICAgZGViX2tlcm5lbF9tb2R1bGVzX25hbWU9ImxpbnV4LW1vZHVsZXMtJHtkZWJfa2VybmVsX3ZlcnNpb259LWFtZDY0LmRlYiIKICAgICAgICBoZWFkZXJzX2RlYl9uYW1lPSQod2dldCAtcU8tIGh0dHBzOi8va2VybmVsLnVidW50dS5jb20vfmtlcm5lbC1wcGEvbWFpbmxpbmUvdiR7ZGViX2tlcm5lbF92ZXJzaW9ufS8gfCBncmVwICJsaW51eC1oZWFkZXJzIiB8IGdyZXAgImdlbmVyaWMiIHwgYXdrIC1GJ1wiPicgJy9hbWQ2NC5kZWIve3ByaW50ICQyfScgfCBjdXQgLWQnPCcgLWYxIHwgaGVhZCAtMSkKICAgICAgICBkZWJfa2VybmVsX2hlYWRlcnNfdXJsPSJodHRwczovL2tlcm5lbC51YnVudHUuY29tL35rZXJuZWwtcHBhL21haW5saW5lL3Yke2RlYl9rZXJuZWxfdmVyc2lvbn0vJHtoZWFkZXJzX2RlYl9uYW1lfSIKICAgICAgICBkZWJfa2VybmVsX2hlYWRlcnNfbmFtZT0ibGludXgtaGVhZGVycy0ke2RlYl9rZXJuZWxfdmVyc2lvbn0tYW1kNjQuZGViIgogICAgZWxzZQogICAgICAgIGRlYl9rZXJuZWxfdmVyc2lvbj0iNS4zIgogICAgICAgIGRlYl9uYW1lPSQod2dldCAtcU8tIGh0dHBzOi8va2VybmVsLnVidW50dS5jb20vfmtlcm5lbC1wcGEvbWFpbmxpbmUvdiR7ZGViX2tlcm5lbF92ZXJzaW9ufS8gfCBncmVwICJsaW51eC1pbWFnZSIgfCBncmVwICJnZW5lcmljIiB8IGF3ayAtRidcIj4nICcvaTM4Ni5kZWIve3ByaW50ICQyfScgfCBjdXQgLWQnPCcgLWYxIHwgaGVhZCAtMSkKICAgICAgICBkZWJfa2VybmVsX3VybD0iaHR0cHM6Ly9rZXJuZWwudWJ1bnR1LmNvbS9+a2VybmVsLXBwYS9tYWlubGluZS92JHtkZWJfa2VybmVsX3ZlcnNpb259LyR7ZGViX25hbWV9IgogICAgICAgIGRlYl9rZXJuZWxfbmFtZT0ibGludXgtaW1hZ2UtJHtkZWJfa2VybmVsX3ZlcnNpb259LWkzODYuZGViIgogICAgICAgIG1vZHVsZXNfZGViX25hbWU9JCh3Z2V0IC1xTy0gaHR0cHM6Ly9rZXJuZWwudWJ1bnR1LmNvbS9+a2VybmVsLXBwYS9tYWlubGluZS92JHtkZWJfa2VybmVsX3ZlcnNpb259LyB8IGdyZXAgImxpbnV4LW1vZHVsZXMiIHwgZ3JlcCAiZ2VuZXJpYyIgfCBhd2sgLUYnXCI+JyAnL2kzODYuZGViL3twcmludCAkMn0nIHwgY3V0IC1kJzwnIC1mMSB8IGhlYWQgLTEpCiAgICAgICAgZGViX2tlcm5lbF9tb2R1bGVzX3VybD0iaHR0cHM6Ly9rZXJuZWwudWJ1bnR1LmNvbS9+a2VybmVsLXBwYS9tYWlubGluZS92JHtkZWJfa2VybmVsX3ZlcnNpb259LyR7bW9kdWxlc19kZWJfbmFtZX0iCiAgICAgICAgZGViX2tlcm5lbF9tb2R1bGVzX25hbWU9ImxpbnV4LW1vZHVsZXMtJHtkZWJfa2VybmVsX3ZlcnNpb259LWkzODYuZGViIgogICAgICAgIGhlYWRlcnNfZGViX25hbWU9JCh3Z2V0IC1xTy0gaHR0cHM6Ly9rZXJuZWwudWJ1bnR1LmNvbS9+a2VybmVsLXBwYS9tYWlubGluZS92JHtkZWJfa2VybmVsX3ZlcnNpb259LyB8IGdyZXAgImxpbnV4LWhlYWRlcnMiIHwgZ3JlcCAiZ2VuZXJpYyIgfCBhd2sgLUYnXCI+JyAnL2kzODYuZGViL3twcmludCAkMn0nIHwgY3V0IC1kJzwnIC1mMSB8IGhlYWQgLTEpCiAgICAgICAgZGViX2tlcm5lbF9oZWFkZXJzX3VybD0iaHR0cHM6Ly9rZXJuZWwudWJ1bnR1LmNvbS9+a2VybmVsLXBwYS9tYWlubGluZS92JHtkZWJfa2VybmVsX3ZlcnNpb259LyR7aGVhZGVyc19kZWJfbmFtZX0iCiAgICAgICAgZGViX2tlcm5lbF9oZWFkZXJzX25hbWU9ImxpbnV4LWhlYWRlcnMtJHtkZWJfa2VybmVsX3ZlcnNpb259LWkzODYuZGViIgogICAgZmkKICAgIFsgLXogIiR7ZGViX25hbWV9IiBdICYmIF9lcnJvciAiR2V0dGluZyBMaW51eCBrZXJuZWwgYmluYXJ5IHBhY2thZ2UgbmFtZSBmYWlsZWQsIG1heWJlIGtlcm5lbCBidWlsZCBmYWlsZWQuIFBsZWFzZSBjaG9vc2Ugb3RoZXIgb25lIGFuZCB0cnkgYWdhaW4uIgp9CgpmdW5jdGlvbiBnZXRfY2hhcigpIHsKICAgIFNBVkVEU1RUWT1gc3R0eSAtZ2AKICAgIHN0dHkgLWVjaG8KICAgIHN0dHkgY2JyZWFrCiAgICBkZCBpZj0vZGV2L3R0eSBicz0xIGNvdW50PTEgMj4gL2Rldi9udWxsCiAgICBzdHR5IC1yYXcKICAgIHN0dHkgZWNobwogICAgc3R0eSAkU0FWRURTVFRZCn0KCmZ1bmN0aW9uIGNoZWNrX2tlcm5lbF92ZXJzaW9uKCkgewogICAgbG9jYWwga2VybmVsX3ZlcnNpb249JCh1bmFtZSAtciB8IGN1dCAtZC0gLWYxKQogICAgbG9jYWwgbGF0ZXN0X2tlcm5lbF92ZXJzaW9uCiAgICBjYXNlICIkKF9vcykiIGluCiAgICAgICAgY2VudG9zKQogICAgICAgICAgICBnZXRfcnBtX2xhdGVzdF92ZXJzaW9uCiAgICAgICAgICAgIGxhdGVzdF9rZXJuZWxfdmVyc2lvbj0iJHtycG1fa2VybmVsX3ZlcnNpb259IgogICAgICAgICAgICA7OwogICAgICAgIHVidW50dXxkZWJpYW4pCiAgICAgICAgICAgIGdldF9kZWJfbGF0ZXN0X3ZlcnNpb24KICAgICAgICAgICAgbGF0ZXN0X2tlcm5lbF92ZXJzaW9uPSIke2RlYl9rZXJuZWxfdmVyc2lvbn0iCiAgICAgICAgICAgIDs7CiAgICBlc2FjCiAgICBpZiBfdmVyc2lvbl9nZSAke2tlcm5lbF92ZXJzaW9ufSAke2xhdGVzdF9rZXJuZWxfdmVyc2lvbn07IHRoZW4KICAgICAgICByZXR1cm4gMAogICAgZWxzZQogICAgICAgIHJldHVybiAxCiAgICBmaQp9CgojIENoZWNrIE9TIHZlcnNpb24KZnVuY3Rpb24gY2hlY2tfb3MoKSB7CiAgICBpZiBfZXhpc3RzICJ2aXJ0LXdoYXQiOyB0aGVuCiAgICAgICAgdmlydD0iJCh2aXJ0LXdoYXQpIgogICAgZWxpZiBfZXhpc3RzICJzeXN0ZW1kLWRldGVjdC12aXJ0IjsgdGhlbgogICAgICAgIHZpcnQ9IiQoc3lzdGVtZC1kZXRlY3QtdmlydCkiCiAgICBmaQogICAgaWYgWyAtbiAiJHt2aXJ0fSIgLWEgIiR7dmlydH0iID0gImx4YyIgXTsgdGhlbgogICAgICAgIF9lcnJvciAiVmlydHVhbGl6YXRpb24gbWV0aG9kIGlzIExYQywgd2hpY2ggaXMgbm90IHN1cHBvcnRlZC4iCiAgICBmaQogICAgaWYgWyAtbiAiJHt2aXJ0fSIgLWEgIiR7dmlydH0iID0gIm9wZW52eiIgXSB8fCBbIC1kICIvcHJvYy92eiIgXTsgdGhlbgogICAgICAgIF9lcnJvciAiVmlydHVhbGl6YXRpb24gbWV0aG9kIGlzIE9wZW5WWiwgd2hpY2ggaXMgbm90IHN1cHBvcnRlZC4iCiAgICBmaQogICAgWyAteiAiJChfb3MpIiBdICYmIF9lcnJvciAiTm90IHN1cHBvcnRlZCBPUyIKICAgIGNhc2UgIiQoX29zKSIgaW4KICAgICAgICB1YnVudHUpCiAgICAgICAgICAgIFsgLW4gIiQoX29zX3ZlcikiIC1hICIkKF9vc192ZXIpIiAtbHQgMTYgXSAmJiBfZXJyb3IgIk5vdCBzdXBwb3J0ZWQgT1MsIHBsZWFzZSBjaGFuZ2UgdG8gVWJ1bnR1IDE2KyBhbmQgdHJ5IGFnYWluLiIKICAgICAgICAgICAgOzsKICAgICAgICBkZWJpYW4pCiAgICAgICAgICAgIFsgLW4gIiQoX29zX3ZlcikiIC1hICIkKF9vc192ZXIpIiAtbHQgMTAgXSAmJiAgX2Vycm9yICJOb3Qgc3VwcG9ydGVkIE9TLCBwbGVhc2UgY2hhbmdlIHRvIERlYmlhbiAxMCsgYW5kIHRyeSBhZ2Fpbi4iCiAgICAgICAgICAgIDs7CiAgICAgICAgY2VudG9zKQogICAgICAgICAgICBbIC1uICIkKF9vc192ZXIpIiAtYSAiJChfb3NfdmVyKSIgLWx0IDYgXSAmJiAgX2Vycm9yICJOb3Qgc3VwcG9ydGVkIE9TLCBwbGVhc2UgY2hhbmdlIHRvIENlbnRPUyA2KyBhbmQgdHJ5IGFnYWluLiIKICAgICAgICAgICAgOzsKICAgICAgICAqKQogICAgICAgICAgICBfZXJyb3IgIk5vdCBzdXBwb3J0ZWQgT1MiCiAgICAgICAgICAgIDs7CiAgICBlc2FjCn0KCmZ1bmN0aW9uIHN5c2N0bF9jb25maWcoKSB7CiAgICBzZWQgLWkgJy9uZXQuY29yZS5kZWZhdWx0X3FkaXNjL2QnIC9ldGMvc3lzY3RsLmNvbmYKICAgIHNlZCAtaSAnL25ldC5pcHY0LnRjcF9jb25nZXN0aW9uX2NvbnRyb2wvZCcgL2V0Yy9zeXNjdGwuY29uZgogICAgZWNobyAibmV0LmNvcmUuZGVmYXVsdF9xZGlzYyA9IGZxIiA+PiAvZXRjL3N5c2N0bC5jb25mCiAgICBlY2hvICJuZXQuaXB2NC50Y3BfY29uZ2VzdGlvbl9jb250cm9sID0gYmJyIiA+PiAvZXRjL3N5c2N0bC5jb25mCiAgICBzeXNjdGwgLXAgPi9kZXYvbnVsbCAyPiYxCn0KCmZ1bmN0aW9uIGluc3RhbGxfa2VybmVsKCkgewogICAgX2luZm8gIkdldHRpbmcgbGF0ZXN0IGtlcm5lbCB2ZXJzaW9uLi4uIgogICAgY2FzZSAiJChfb3MpIiBpbgogICAgICAgIGNlbnRvcykKICAgICAgICAgICAgaWYgWyAtbiAiJChfb3NfdmVyKSIgXTsgdGhlbgogICAgICAgICAgICAgICAgaWYgWyAiJChfb3NfdmVyKSIgLWVxIDYgXTsgdGhlbgogICAgICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgIndnZXQgLWMgLXQzIC1UNjAgLU8gJHtycG1fa2VybmVsX25hbWV9ICR7cnBtX2tlcm5lbF91cmx9JHtycG1fa2VybmVsX25hbWV9IgogICAgICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgIndnZXQgLWMgLXQzIC1UNjAgLU8gJHtycG1fa2VybmVsX2RldmVsX25hbWV9ICR7cnBtX2tlcm5lbF91cmx9JHtycG1fa2VybmVsX2RldmVsX25hbWV9IgogICAgICAgICAgICAgICAgICAgIFsgLXMgIiR7cnBtX2tlcm5lbF9uYW1lfSIgXSAmJiBfZXJyb3JfZGV0ZWN0ICJycG0gLWl2aCAke3JwbV9rZXJuZWxfbmFtZX0iIHx8IF9lcnJvciAiRG93bmxvYWQgJHtycG1fa2VybmVsX25hbWV9IGZhaWxlZCwgcGxlYXNlIGNoZWNrIGl0LiIKICAgICAgICAgICAgICAgICAgICBbIC1zICIke3JwbV9rZXJuZWxfZGV2ZWxfbmFtZX0iIF0gJiYgX2Vycm9yX2RldGVjdCAicnBtIC1pdmggJHtycG1fa2VybmVsX2RldmVsX25hbWV9IiB8fCBfZXJyb3IgIkRvd25sb2FkICR7cnBtX2tlcm5lbF9kZXZlbF9uYW1lfSBmYWlsZWQsIHBsZWFzZSBjaGVjayBpdC4iCiAgICAgICAgICAgICAgICAgICAgcm0gLWYgJHtycG1fa2VybmVsX25hbWV9ICR7cnBtX2tlcm5lbF9kZXZlbF9uYW1lfQogICAgICAgICAgICAgICAgICAgIFsgISAtZiAiL2Jvb3QvZ3J1Yi9ncnViLmNvbmYiIF0gJiYgX2Vycm9yICIvYm9vdC9ncnViL2dydWIuY29uZiBub3QgZm91bmQsIHBsZWFzZSBjaGVjayBpdC4iCiAgICAgICAgICAgICAgICAgICAgc2VkIC1pICdzL15kZWZhdWx0PS4qL2RlZmF1bHQ9MC9nJyAvYm9vdC9ncnViL2dydWIuY29uZgogICAgICAgICAgICAgICAgZWxpZiBbWyAiJChfb3NfdmVyKSIgLWVxIDcgfHwgIiQoX29zX3ZlcikiIC1lcSA4IHx8ICIkKF9vc192ZXIpIiAtZXEgOSAgXV07IHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBbWyAiJChfb3NfdmVyKSIgLWVxIDggfHwgIiQoX29zX3ZlcikiIC1lcSA5IF1dOyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgIndnZXQgLWMgLXQzIC1UNjAgLU8gJHtycG1fa2VybmVsX2NvcmVfbmFtZX0gJHtycG1fa2VybmVsX3VybH0ke3JwbV9rZXJuZWxfY29yZV9uYW1lfSIKICAgICAgICAgICAgICAgICAgICAgICAgX2Vycm9yX2RldGVjdCAid2dldCAtYyAtdDMgLVQ2MCAtTyAke3JwbV9rZXJuZWxfbW9kdWxlc19uYW1lfSAke3JwbV9rZXJuZWxfdXJsfSR7cnBtX2tlcm5lbF9tb2R1bGVzX25hbWV9IgogICAgICAgICAgICAgICAgICAgICAgICBbIC1zICIke3JwbV9rZXJuZWxfY29yZV9uYW1lfSIgXSB8fCBfZXJyb3IgIkRvd25sb2FkICR7cnBtX2tlcm5lbF9jb3JlX25hbWV9IGZhaWxlZCwgcGxlYXNlIGNoZWNrIGl0LiIKICAgICAgICAgICAgICAgICAgICAgICAgWyAtcyAiJHtycG1fa2VybmVsX21vZHVsZXNfbmFtZX0iIF0gfHwgX2Vycm9yICJEb3dubG9hZCAke3JwbV9rZXJuZWxfbW9kdWxlc19uYW1lfSBmYWlsZWQsIHBsZWFzZSBjaGVjayBpdC4iCiAgICAgICAgICAgICAgICAgICAgZmkKICAgICAgICAgICAgICAgICAgICBfZXJyb3JfZGV0ZWN0ICJ3Z2V0IC1jIC10MyAtVDYwIC1PICR7cnBtX2tlcm5lbF9uYW1lfSAke3JwbV9rZXJuZWxfdXJsfSR7cnBtX2tlcm5lbF9uYW1lfSIKICAgICAgICAgICAgICAgICAgICBfZXJyb3JfZGV0ZWN0ICJ3Z2V0IC1jIC10MyAtVDYwIC1PICR7cnBtX2tlcm5lbF9kZXZlbF9uYW1lfSAke3JwbV9rZXJuZWxfdXJsfSR7cnBtX2tlcm5lbF9kZXZlbF9uYW1lfSIKICAgICAgICAgICAgICAgICAgICBfZXJyb3JfZGV0ZWN0ICJ3Z2V0IC1jIC10MyAtVDYwIC1PICR7cnBtX2tlcm5lbF9oZWFkZXJzX25hbWV9ICR7cnBtX2tlcm5lbF91cmx9JHtycG1fa2VybmVsX2hlYWRlcnNfbmFtZX0iCiAgICAgICAgICAgICAgICAgICAgWyAtcyAiJHtycG1fa2VybmVsX2NvcmVfbmFtZX0iIF0gJiYgX2Vycm9yX2RldGVjdCAicnBtIC1pdmggJHtycG1fa2VybmVsX2NvcmVfbmFtZX0iCiAgICAgICAgICAgICAgICAgICAgWyAtcyAiJHtycG1fa2VybmVsX21vZHVsZXNfbmFtZX0iIF0gJiYgX2Vycm9yX2RldGVjdCAicnBtIC1pdmggJHtycG1fa2VybmVsX21vZHVsZXNfbmFtZX0iCiAgICAgICAgICAgICAgICAgICAgWyAtcyAiJHtycG1fa2VybmVsX25hbWV9IiBdICYmIF9lcnJvcl9kZXRlY3QgInJwbSAtaXZoICR7cnBtX2tlcm5lbF9uYW1lfSIgfHwgX2Vycm9yICJEb3dubG9hZCAke3JwbV9rZXJuZWxfbmFtZX0gZmFpbGVkLCBwbGVhc2UgY2hlY2sgaXQuIgogICAgICAgICAgICAgICAgICAgIFsgLXMgIiR7cnBtX2tlcm5lbF9kZXZlbF9uYW1lfSIgXSAmJiBfZXJyb3JfZGV0ZWN0ICJycG0gLWl2aCAke3JwbV9rZXJuZWxfZGV2ZWxfbmFtZX0iIHx8IF9lcnJvciAiRG93bmxvYWQgJHtycG1fa2VybmVsX2RldmVsX25hbWV9IGZhaWxlZCwgcGxlYXNlIGNoZWNrIGl0LiIKICAgICAgICAgICAgICAgICAgICBbIC1zICIke3JwbV9rZXJuZWxfaGVhZGVyc19uYW1lfSIgXSAmJiBfZXJyb3JfZGV0ZWN0ICJycG0gLWl2aCAke3JwbV9rZXJuZWxfaGVhZGVyc19uYW1lfSIgfHwgX2Vycm9yICJEb3dubG9hZCAke3JwbV9rZXJuZWxfaGVhZGVyc19uYW1lfSBmYWlsZWQsIHBsZWFzZSBjaGVjayBpdC4iCiAgICAgICAgICAgICAgICAgICAgWyAtcyAiJHtycG1fa2VybmVsX2NvcmVfbmFtZX0iIF0gJiYgcm0gLWYgJHtycG1fa2VybmVsX2NvcmVfbmFtZX0KICAgICAgICAgICAgICAgICAgICBbIC1zICIke3JwbV9rZXJuZWxfbW9kdWxlc19uYW1lfSIgXSAmJiBybSAtZiAke3JwbV9rZXJuZWxfbW9kdWxlc19uYW1lfQogICAgICAgICAgICAgICAgICAgIHJtIC1mICR7cnBtX2tlcm5lbF9uYW1lfSAke3JwbV9rZXJuZWxfZGV2ZWxfbmFtZX0gJHtycG1fa2VybmVsX2hlYWRlcnNfbmFtZX0KICAgICAgICAgICAgICAgICAgICBncnViYnkgLS1zZXQtZGVmYXVsdCAkKGdydWJieSAtLWluZm89QUxMIHwgZ3JlcCAtRSBea2VybmVsLioke3JwbV9rZXJuZWxfdmVyc2lvbn0gfCBjdXQgLWQ9IC1mMikKICAgICAgICAgICAgICAgIGZpCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIDs7CiAgICAgICAgdWJ1bnR1fGRlYmlhbikKICAgICAgICAgICAgX2Vycm9yX2RldGVjdCAid2dldCAtYyAtdDMgLVQ2MCAtTyAke2RlYl9rZXJuZWxfaGVhZGVyc19uYW1lfSAke2RlYl9rZXJuZWxfaGVhZGVyc191cmx9IgogICAgICAgICAgICBfZXJyb3JfZGV0ZWN0ICJ3Z2V0IC1jIC10MyAtVDYwIC1PICR7ZGViX2tlcm5lbF9tb2R1bGVzX25hbWV9ICR7ZGViX2tlcm5lbF9tb2R1bGVzX3VybH0iCiAgICAgICAgICAgIF9lcnJvcl9kZXRlY3QgIndnZXQgLWMgLXQzIC1UNjAgLU8gJHtkZWJfa2VybmVsX25hbWV9ICR7ZGViX2tlcm5lbF91cmx9IgogICAgICAgICAgICBpZiBbWyAiZGViaWFuIiA9PSAiJChfb3MpIiB8fCAoInVidW50dSIgPT0gIiQoX29zKSIgJiYgMTYgPT0gIiQoX29zX3ZlcikiKSBdXTsgdGhlbgogICAgICAgICAgICAgICAgZHBrZ19yZXBhY2tlZCAke2RlYl9rZXJuZWxfaGVhZGVyc19uYW1lfQogICAgICAgICAgICAgICAgZHBrZ19yZXBhY2tlZCAke2RlYl9rZXJuZWxfbW9kdWxlc19uYW1lfQogICAgICAgICAgICAgICAgZHBrZ19yZXBhY2tlZCAke2RlYl9rZXJuZWxfbmFtZX0KICAgICAgICAgICAgZmkKICAgICAgICAgICAgX2Vycm9yX2RldGVjdCAiZHBrZyAtaSAke2RlYl9rZXJuZWxfaGVhZGVyc19uYW1lfSAke2RlYl9rZXJuZWxfbW9kdWxlc19uYW1lfSAke2RlYl9rZXJuZWxfbmFtZX0iCiAgICAgICAgICAgIHJtIC1mICR7ZGViX2tlcm5lbF9oZWFkZXJzX25hbWV9ICR7ZGViX2tlcm5lbF9tb2R1bGVzX25hbWV9ICR7ZGViX2tlcm5lbF9uYW1lfQogICAgICAgICAgICBfZXJyb3JfZGV0ZWN0ICIvdXNyL3NiaW4vdXBkYXRlLWdydWIiCiAgICAgICAgICAgIDs7CiAgICAgICAgKikKICAgICAgICAgICAgOzsgIyBkbyBub3RoaW5nCiAgICBlc2FjCn0KCmZ1bmN0aW9uIHJlYm9vdF9vcygpIHsKICAgIGVjaG8KICAgIF9pbmZvICJUaGUgc3lzdGVtIG5lZWRzIHRvIHJlYm9vdC4iCiAgICByZWFkIC1yIC1wICAiRG8geW91IHdhbnQgdG8gcmVzdGFydCBzeXN0ZW0/IFt5L05dIiBpc19yZWJvb3QKICAgIGlmIFtbICR7aXNfcmVib290fSAgPX4gXltZeV0kIF1dOyB0aGVuCiAgICAgICAgcmVib290CiAgICBlbHNlCiAgICAgICAgX2luZm8gIlJlYm9vdCBoYXMgYmVlbiBjYW5jZWxlZC4uLiIKICAgICAgICBleGl0IDAKICAgIGZpCn0KCmZ1bmN0aW9uIHVwZGF0ZV9rZXJuZWwoKSB7CiAgICBjaGVja19vcwogICAgaW5zdGFsbF9kZXBlbmRlbmNlCiAgICBpZiBjaGVja19rZXJuZWxfdmVyc2lvbjsgdGhlbgogICAgICAgIGVjaG8KICAgICAgICBfaW5mbyAiVGhlIGtlcm5lbCB2ZXJzaW9uIGlzIHRoZSBsYXRlc3QgdmVyc2lvbi4uLiIKICAgICAgICBleGl0IDAKICAgIGZpCiAgICBpbnN0YWxsX2tlcm5lbAogICAgc3lzY3RsX2NvbmZpZwogICAgcmVib290X29zCn0KCltbICRFVUlEIC1uZSAwIF1dICYmIF9lcnJvciAiVGhpcyBzY3JpcHQgbXVzdCBiZSBydW4gYXMgcm9vdCIKb3BzeT0kKCBfb3NfZnVsbCApCmFyY2g9JCggdW5hbWUgLW0gKQpsYml0PSQoIGdldGNvbmYgTE9OR19CSVQgKQprZXJuPSQoIHVuYW1lIC1yICkKCmNsZWFyCmVjaG8gIi0tLS0tLS0tLS0gU3lzdGVtIEluZm9ybWF0aW9uIC0tLS0tLS0tLS0iCmVjaG8gIiBPUyAgICAgIDogJG9wc3kiCmVjaG8gIiBBcmNoICAgIDogJGFyY2ggKCRsYml0IEJpdCkiCmVjaG8gIiBLZXJuZWwgIDogJGtlcm4iCmVjaG8gIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iCmVjaG8gIiBTY3JpcHQgdG8gdXBkYXRlIExpbnV4IGtlcm5lbCB0byB0aGUgbGF0ZXN0IHZlcnNpb24iCmVjaG8KZWNobyAiIFVSTDogaHR0cHM6Ly9naXRodWIuY29tL3p4Y3Zvcy9zeXN0ZW0tYXV0b21hdGlvbi1zY3JpcHRzL2Jsb2IvbWFpbi91cGRhdGUta2VybmVsLnNoIgplY2hvICItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIgplY2hvCmVjaG8gIlByZXNzIGFueSBrZXkgdG8gc3RhcnQuLi5vciBQcmVzcyBDdHJsK0MgdG8gY2FuY2VsIgpjaGFyPSQoZ2V0X2NoYXIpCgp1cGRhdGVfa2VybmVsIDI+JjEgfCB0ZWUgJHtjdXJfZGlyfS91cGRhdGVfa2VybmVsLmxvZw==" | base64 -d > update-kernel.sh
  base update-kernel.sh
  ```
## remove-kernel.sh
* Description: Remove extra kernels
* System Required: CentOS, Debian, Ubuntu
* Usage
  * online
  ```base
  bash <(wget -qO- https://raw.githubusercontent.com/zxcvos/system-automation-scripts/main/remove-kernel.sh)
  ```
  * download
  ```base
  wget -O remove-kernel.sh https://raw.githubusercontent.com/zxcvos/system-automation-scripts/main/remove-kernel.sh
  bash remove-kernel.sh
  ```
  * base64
  ```base
  echo "IyEvdXNyL2Jpbi9lbnYgYmFzaAojCiMgRGVzY3JpcHRpb246ICAgICAgUmVtb3ZlIGV4dHJhIGtlcm5lbHMKIyBTeXN0ZW0gUmVxdWlyZWQ6ICBDZW50T1MsIERlYmlhbiwgVWJ1bnR1CiMKIyBDb3B5cmlnaHQgKEMpIDIwMjMgenhjdm9zCiMgR2l0aHViOiBodHRwczovL2dpdGh1Yi5jb20venhjdm9zL3N5c3RlbS1hdXRvbWF0aW9uLXNjcmlwdHMvYmxvYi9tYWluL3JlbW92ZS1rZXJuZWwuc2gKCmN1cl9kaXI9IiQoY2QgLVAgLS0gIiQoZGlybmFtZSAtLSAiJDAiKSIgJiYgcHdkIC1QKSIKUkVEPSdcMDMzWzE7MzE7MzFtJwpHUkVFTj0nXDAzM1sxOzMxOzMybScKWUVMTE9XPSdcMDMzWzE7MzE7MzNtJwpOQz0nXDAzM1swbScKCmZ1bmN0aW9uIF9pbmZvKCkgewogICAgcHJpbnRmICIke0dSRUVOfVtJbmZvXSAke05DfSIKICAgIHByaW50ZiAtLSAiJXMiICIkMSIKICAgIHByaW50ZiAiXG4iCn0KCmZ1bmN0aW9uIF93YXJuKCkgewogICAgcHJpbnRmICIke1lFTExPV31bV2FybmluZ10gJHtOQ30iCiAgICBwcmludGYgLS0gIiVzIiAiJDEiCiAgICBwcmludGYgIlxuIgp9CgpmdW5jdGlvbiBfZXJyb3IoKSB7CiAgICBwcmludGYgIiR7UkVEfVtFcnJvcl0gJHtOQ30iCiAgICBwcmludGYgLS0gIiVzIiAiJDEiCiAgICBwcmludGYgIlxuIgogICAgZXhpdCAxCn0KCmZ1bmN0aW9uIF9leGlzdHMoKSB7CiAgICBsb2NhbCBjbWQ9IiQxIgogICAgaWYgZXZhbCB0eXBlIHR5cGUgPiAvZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgIGV2YWwgdHlwZSAiJGNtZCIgPiAvZGV2L251bGwgMj4mMQogICAgZWxpZiBjb21tYW5kID4gL2Rldi9udWxsIDI+JjE7IHRoZW4KICAgICAgICBjb21tYW5kIC12ICIkY21kIiA+IC9kZXYvbnVsbCAyPiYxCiAgICBlbHNlCiAgICAgICAgd2hpY2ggIiRjbWQiID4gL2Rldi9udWxsIDI+JjEKICAgIGZpCiAgICBsb2NhbCBydD0kPwogICAgcmV0dXJuICR7cnR9Cn0KCmZ1bmN0aW9uIF9vcygpIHsKICAgIGxvY2FsIG9zPSIiCiAgICBbIC1mICIvZXRjL2RlYmlhbl92ZXJzaW9uIiBdICYmIHNvdXJjZSAvZXRjL29zLXJlbGVhc2UgJiYgb3M9IiR7SUR9IiAmJiBwcmludGYgLS0gIiVzIiAiJHtvc30iICYmIHJldHVybgogICAgWyAtZiAiL2V0Yy9yZWRoYXQtcmVsZWFzZSIgXSAmJiBvcz0iY2VudG9zIiAmJiBwcmludGYgLS0gIiVzIiAiJHtvc30iICYmIHJldHVybgp9CgpmdW5jdGlvbiBfb3NfZnVsbCgpIHsKICAgIFsgLWYgL2V0Yy9yZWRoYXQtcmVsZWFzZSBdICYmIGF3ayAne3ByaW50ICgkMSwkM34vXlswLTldLz8kMzokNCl9JyAvZXRjL3JlZGhhdC1yZWxlYXNlICYmIHJldHVybgogICAgWyAtZiAvZXRjL29zLXJlbGVhc2UgXSAmJiBhd2sgLUYnWz0gIl0nICcvUFJFVFRZX05BTUUve3ByaW50ICQzLCQ0LCQ1fScgL2V0Yy9vcy1yZWxlYXNlICYmIHJldHVybgogICAgWyAtZiAvZXRjL2xzYi1yZWxlYXNlIF0gJiYgYXdrIC1GJ1s9Il0rJyAnL0RFU0NSSVBUSU9OL3twcmludCAkMn0nIC9ldGMvbHNiLXJlbGVhc2UgJiYgcmV0dXJuCn0KCmZ1bmN0aW9uIGdldF9jaGFyKCkgewogICAgU0FWRURTVFRZPWBzdHR5IC1nYAogICAgc3R0eSAtZWNobwogICAgc3R0eSBjYnJlYWsKICAgIGRkIGlmPS9kZXYvdHR5IGJzPTEgY291bnQ9MSAyPiAvZGV2L251bGwKICAgIHN0dHkgLXJhdwogICAgc3R0eSBlY2hvCiAgICBzdHR5ICRTQVZFRFNUVFkKfQoKZnVuY3Rpb24gcmVib290X29zKCkgewogICAgZWNobwogICAgX2luZm8gIlRoZSBzeXN0ZW0gbmVlZHMgdG8gcmVib290LiIKICAgIHJlYWQgLXIgLXAgICJEbyB5b3Ugd2FudCB0byByZXN0YXJ0IHN5c3RlbT8gW3kvTl0iIGlzX3JlYm9vdAogICAgaWYgW1sgJHtpc19yZWJvb3R9ICA9fiBeW1l5XSQgXV07IHRoZW4KICAgICAgICByZWJvb3QKICAgIGVsc2UKICAgICAgICBfaW5mbyAiUmVib290IGhhcyBiZWVuIGNhbmNlbGVkLi4uIgogICAgICAgIGV4aXQgMAogICAgZmkKfQoKZnVuY3Rpb24gcmVtb3ZlX2V4dHJhX2tlcm5lbCgpIHsKICAgIF9pbmZvICJSZW1vdmluZyBleHRyYSBrZXJuZWxzLi4uIgogICAgY2FzZSAiJChfb3MpIiBpbgogICAgICAgIGNlbnRvcykKICAgICAgICAgICAgaWYgISBycG0gLXFhIHwgZ3JlcCAtRSAiaGVhZGVyc3xkZXZlbHxrZXJuZWx8bW9kdWxlc3xjb3JlIiB8IGdyZXAgLXYgJCh1bmFtZSAtcik7IHRoZW4KICAgICAgICAgICAgICAgIF9pbmZvICJObyBhZGRpdGlvbmFsIGtlcm5lbHMgZm91bmQgdG8gcmVtb3ZlIgogICAgICAgICAgICAgICAgZXhpdCAwCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIHJwbSAtcWEgfCBncmVwIC1FICJoZWFkZXJzfGRldmVsfGtlcm5lbHxtb2R1bGVzfGNvcmUiIHwgZ3JlcCAtdiAkKHVuYW1lIC1yKSB8IHhhcmdzIHJwbSAtZSAtLW5vZGVwcwogICAgICAgICAgICBpZiBfZXhpc3RzICJ5dW0iOyB0aGVuCiAgICAgICAgICAgICAgICB5dW0gLXkgYXV0b3JlbW92ZQogICAgICAgICAgICBlbGlmIF9leGlzdHMgImRuZiI7IHRoZW4KICAgICAgICAgICAgICAgIGRuZiAteSBhdXRvcmVtb3ZlCiAgICAgICAgICAgIGZpCiAgICAgICAgICAgIDs7CiAgICAgICAgdWJ1bnR1fGRlYmlhbikKICAgICAgICAgICAgaWYgISBkcGtnIC1sIHwgZ3JlcCAtRSAibGludXgtKGltYWdlfG1vZHVsZXN8aGVhZGVycykiIHwgYXdrICd7cHJpbnQgJDJ9JyB8IGdyZXAgLXYgIiQodW5hbWUgLXIpIjsgdGhlbgogICAgICAgICAgICAgICAgX2luZm8gIk5vIGFkZGl0aW9uYWwga2VybmVscyBmb3VuZCB0byByZW1vdmUiCiAgICAgICAgICAgICAgICBleGl0IDAKICAgICAgICAgICAgZmkKICAgICAgICAgICAgZHBrZyAtbCB8IGdyZXAgLUUgImxpbnV4LShpbWFnZXxtb2R1bGVzfGhlYWRlcnMpIiB8IGF3ayAne3ByaW50ICQyfScgfCBncmVwIC12ICIkKHVuYW1lIC1yKSIgfCB4YXJncyBhcHQtZ2V0IC15IHB1cmdlCiAgICAgICAgICAgIGFwdC1nZXQgLXkgYXV0b3JlbWUKICAgICAgICAgICAgOzsKICAgICAgICAqKQogICAgICAgICAgICBfZXJyb3IgIk5vdCBzdXBwb3J0ZWQgT1MiCiAgICAgICAgICAgIDs7CiAgICBlc2FjCiAgICBfaW5mbyAiRXh0cmEga2VybmVscyByZW1vdmVkLi4uIgp9CgpmdW5jdGlvbiByZW1vdmVfa2VybmVsKCkgewogICAgcmVtb3ZlX2V4dHJhX2tlcm5lbAogICAgcmVib290X29zCn0KCltbICRFVUlEIC1uZSAwIF1dICYmIF9lcnJvciAiVGhpcyBzY3JpcHQgbXVzdCBiZSBydW4gYXMgcm9vdCIKb3BzeT0kKCBfb3NfZnVsbCApCmFyY2g9JCggdW5hbWUgLW0gKQpsYml0PSQoIGdldGNvbmYgTE9OR19CSVQgKQprZXJuPSQoIHVuYW1lIC1yICkKCmNsZWFyCmVjaG8gIi0tLS0tLS0tLS0gU3lzdGVtIEluZm9ybWF0aW9uIC0tLS0tLS0tLS0iCmVjaG8gIiBPUyAgICAgIDogJG9wc3kiCmVjaG8gIiBBcmNoICAgIDogJGFyY2ggKCRsYml0IEJpdCkiCmVjaG8gIiBLZXJuZWwgIDogJGtlcm4iCmVjaG8gIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iCmVjaG8gIiBTY3JpcHQgdG8gcmVtb3ZlIGV4dHJhIGtlcm5lbHMiCmVjaG8KZWNobyAiIFVSTDogaHR0cHM6Ly9naXRodWIuY29tL3p4Y3Zvcy9zeXN0ZW0tYXV0b21hdGlvbi1zY3JpcHRzL2Jsb2IvbWFpbi9yZW1vdmUta2VybmVsLnNoIgplY2hvICItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIgplY2hvCl93YXJuICJQbGVhc2UgZG8gbm90IHVzZSB0aGlzIHNjcmlwdCBpbiBhIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQuIgpfd2FybiAiVG8gZW5zdXJlIHRoZSBzYWZldHkgb2YgeW91ciBkYXRhLCBwbGVhc2UgYmFjayB1cCB5b3VyIGRhdGEgYmVmb3JlIHRyeWluZyB0aGlzIHNjcmlwdC4iCmVjaG8gIlByZXNzIGFueSBrZXkgdG8gc3RhcnQuLi5vciBQcmVzcyBDdHJsK0MgdG8gY2FuY2VsIgpjaGFyPSQoZ2V0X2NoYXIpCgpyZW1vdmVfa2VybmVsIDI+JjEgfCB0ZWUgJHtjdXJfZGlyfS9yZW1vdmVfa2VybmVsLmxvZw==" | base64 -d > remove-kernel.sh
  base remove-kernel.sh
  ```
* cmd (Warning: Please do not use this script in a production environment. To ensure the safety of your data, please back up your data before trying this script.)
  1. yum(redhat centos fedora other-redhat)
  ```base
  rpm -qa | grep -E "headers|devel|kernel|modules|core" | grep -v $(uname -r) | xargs rpm -e --nodeps
  yum -y autoremove
  ```
  2. dnf(redhat centos fedora other-redhat)
  ```base
  rpm -qa | grep -E "headers|devel|kernel|modules|core" | grep -v $(uname -r) | xargs rpm -e --nodeps
  dnf -y autoremove
  ```
  3. apt-get(debian ubuntu deepin other-debian)
  ```base
  dpkg -l | grep -E "linux-(image|modules|headers)" | awk '{print $2}' | grep -v "$(uname -r)" | xargs apt-get -y purge
  apt-get -y autoremove
  ```
